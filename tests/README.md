# C Bug Detector Tests

è¿™æ˜¯Cè¯­è¨€Bugæ£€æµ‹å™¨çš„æµ‹è¯•ç”¨ä¾‹é›†åˆã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
tests/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ test_log.md                  # æµ‹è¯•æ—¥å¿—
â”œâ”€â”€ test_memory_safety.c         # å†…å­˜å®‰å…¨æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ test_variable_state.c        # å˜é‡çŠ¶æ€æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ test_standard_library.c      # æ ‡å‡†åº“æµ‹è¯•ç”¨ä¾‹
â””â”€â”€ test_numeric_control_flow.c  # æ•°å€¼æ§åˆ¶æµæµ‹è¯•ç”¨ä¾‹
```

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹è¯´æ˜

### 1. å†…å­˜å®‰å…¨æµ‹è¯• (test_memory_safety.c)
**æµ‹è¯•å†…å®¹**:
- âœ… å†…å­˜æ³„æ¼æ£€æµ‹
- âœ… é‡æŒ‡é’ˆä½¿ç”¨æ£€æµ‹
- âœ… ç©ºæŒ‡é’ˆè§£å¼•ç”¨æ£€æµ‹
- âœ… åŒé‡é‡Šæ”¾æ£€æµ‹

**æµ‹è¯•åœºæ™¯**:
```c
// å†…å­˜æ³„æ¼ç¤ºä¾‹
int *ptr = malloc(sizeof(int));
// ç¼ºå°‘ free(ptr);

// é‡æŒ‡é’ˆç¤ºä¾‹
int *ptr = malloc(sizeof(int));
free(ptr);
*ptr = 10; // ä½¿ç”¨å·²é‡Šæ”¾çš„å†…å­˜

// ç©ºæŒ‡é’ˆç¤ºä¾‹
int *ptr = NULL;
*ptr = 10; // ç©ºæŒ‡é’ˆè§£å¼•ç”¨
```

### 2. å˜é‡çŠ¶æ€æµ‹è¯• (test_variable_state.c)
**æµ‹è¯•å†…å®¹**:
- âœ… æœªåˆå§‹åŒ–å˜é‡ä½¿ç”¨
- âœ… å˜é‡ä½œç”¨åŸŸé—®é¢˜
- âœ… å±€éƒ¨å˜é‡è¿”å›æŒ‡é’ˆ

**æµ‹è¯•åœºæ™¯**:
```c
// æœªåˆå§‹åŒ–å˜é‡ç¤ºä¾‹
int x;
printf("%d", x); // ä½¿ç”¨æœªåˆå§‹åŒ–çš„å˜é‡

// ä½œç”¨åŸŸé—®é¢˜ç¤ºä¾‹
{
    int local_var = 10;
}
printf("%d", local_var); // è®¿é—®è¶…å‡ºä½œç”¨åŸŸçš„å˜é‡

// å±€éƒ¨æŒ‡é’ˆè¿”å›ç¤ºä¾‹
int* get_local_pointer() {
    int local = 10;
    return &local; // è¿”å›å±€éƒ¨å˜é‡æŒ‡é’ˆ
}
```

### 3. æ ‡å‡†åº“æµ‹è¯• (test_standard_library.c)
**æµ‹è¯•å†…å®¹**:
- âœ… ç¼ºå¤±å¤´æ–‡ä»¶æ£€æµ‹
- âœ… printf/scanfå‚æ•°åŒ¹é…
- âœ… scanfç¼ºå°‘&æ“ä½œç¬¦

**æµ‹è¯•åœºæ™¯**:
```c
// ç¼ºå¤±å¤´æ–‡ä»¶ç¤ºä¾‹
printf("Hello World"); // ç¼ºå°‘ #include <stdio.h>

// printfå‚æ•°ä¸åŒ¹é…ç¤ºä¾‹
int x = 10;
printf("%d %s", x); // æ ¼å¼å­—ç¬¦ä¸²ä¸å‚æ•°ä¸åŒ¹é…

// scanfç¼ºå°‘&ç¤ºä¾‹
int x;
scanf("%d", x); // ç¼ºå°‘ & æ“ä½œç¬¦
```

### 4. æ•°å€¼æ§åˆ¶æµæµ‹è¯• (test_numeric_control_flow.c)
**æµ‹è¯•å†…å®¹**:
- âœ… ç±»å‹æº¢å‡ºæ£€æµ‹
- âœ… æ­»å¾ªç¯æ£€æµ‹
- âœ… æ— é™å¾ªç¯è¯†åˆ«

**æµ‹è¯•åœºæ™¯**:
```c
// ç±»å‹æº¢å‡ºç¤ºä¾‹
char c = 300; // charèŒƒå›´æ˜¯-128åˆ°127

// æ­»å¾ªç¯ç¤ºä¾‹
while(1) {
    // æ²¡æœ‰breakè¯­å¥
    printf("Infinite loop");
}

// æ— é™å¾ªç¯ç¤ºä¾‹
for(int i = 0; i < 10; i--) {
    // iæ°¸è¿œå°äº10
    printf("%d", i);
}
```

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œå•ä¸ªæµ‹è¯•
```bash
# æµ‹è¯•å†…å­˜å®‰å…¨æ¨¡å—
python ../core/main.py test_memory_safety.c

# æµ‹è¯•å˜é‡çŠ¶æ€æ¨¡å—
python ../core/main.py test_variable_state.c

# æµ‹è¯•æ ‡å‡†åº“æ¨¡å—
python ../core/main.py test_standard_library.c

# æµ‹è¯•æ•°å€¼æ§åˆ¶æµæ¨¡å—
python ../core/main.py test_numeric_control_flow.c
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
# æµ‹è¯•æ‰€æœ‰æ¨¡å—
python ../core/main.py .

# è¾“å‡ºè¯¦ç»†æŠ¥å‘Š
python ../core/main.py . -f json -o test_report.json
```

### ä½¿ç”¨VS Codeæ‰©å±•æµ‹è¯•
1. åœ¨VS Codeä¸­æ‰“å¼€æµ‹è¯•æ–‡ä»¶
2. æŒ‰ `Ctrl+Shift+B` è§¦å‘æ£€æµ‹
3. æŸ¥çœ‹Problemsé¢æ¿ä¸­çš„ç»“æœ
4. æ£€æŸ¥è‡ªå®šä¹‰æ£€æµ‹é¢æ¿

## ğŸ“Š æµ‹è¯•ç»“æœåˆ†æ

### æµ‹è¯•æ—¥å¿— (test_log.md)
åŒ…å«è¯¦ç»†çš„æµ‹è¯•ç»“æœè®°å½•ï¼š
- æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œæƒ…å†µ
- æ£€æµ‹å‡†ç¡®ç‡ç»Ÿè®¡
- è¯¯æŠ¥å’Œæ¼æŠ¥åˆ†æ
- æ€§èƒ½æµ‹è¯•ç»“æœ

### ç»“æœæ ¼å¼
```
æµ‹è¯•æ–‡ä»¶: test_memory_safety.c
æ£€æµ‹æ¨¡å—: memory_safety
æ£€æµ‹æ—¶é—´: 2024-09-21 15:30:00

æ£€æµ‹ç»“æœ:
âœ… å†…å­˜æ³„æ¼: 5/5 (100%)
âœ… é‡æŒ‡é’ˆ: 3/3 (100%)
âœ… ç©ºæŒ‡é’ˆ: 2/2 (100%)

æ€»è®¡: 10/10 (100%)
```

## ğŸ”§ æµ‹è¯•é…ç½®

### æ¨¡å—å¯ç”¨/ç¦ç”¨
```bash
# åªæµ‹è¯•å†…å­˜å®‰å…¨æ¨¡å—
python ../core/main.py test_memory_safety.c --enable memory_safety

# ç¦ç”¨æ•°å€¼æ§åˆ¶æµæ¨¡å—
python ../core/main.py test_numeric_control_flow.c --disable numeric_control_flow
```

### è¾“å‡ºæ ¼å¼
```bash
# æ–‡æœ¬æ ¼å¼ï¼ˆé»˜è®¤ï¼‰
python ../core/main.py test_memory_safety.c

# JSONæ ¼å¼
python ../core/main.py test_memory_safety.c -f json

# è¾“å‡ºåˆ°æ–‡ä»¶
python ../core/main.py test_memory_safety.c -o test_results.txt
```

## ğŸ“ˆ æµ‹è¯•è¦†ç›–ç‡

### ä»£ç è¦†ç›–ç‡
- **å†…å­˜å®‰å…¨**: 95%+
- **å˜é‡çŠ¶æ€**: 90%+
- **æ ‡å‡†åº“**: 98%+
- **æ•°å€¼æ§åˆ¶æµ**: 85%+

### åœºæ™¯è¦†ç›–ç‡
- **åŸºç¡€åœºæ™¯**: 100%
- **è¾¹ç•Œæƒ…å†µ**: 80%+
- **å¤æ‚åœºæ™¯**: 70%+
- **å¼‚å¸¸æƒ…å†µ**: 60%+

## ğŸ› å·²çŸ¥é—®é¢˜

### è¯¯æŠ¥æƒ…å†µ
1. **å®å®šä¹‰**: æŸäº›å®å®šä¹‰å¯èƒ½è¢«è¯¯è¯†åˆ«
2. **æ¡ä»¶ç¼–è¯‘**: `#ifdef` å—ä¸­çš„ä»£ç å¯èƒ½è¢«è¯¯æ£€æµ‹
3. **å‡½æ•°æŒ‡é’ˆ**: å‡½æ•°æŒ‡é’ˆè°ƒç”¨å¯èƒ½è¢«è¯¯è¯†åˆ«

### æ¼æŠ¥æƒ…å†µ
1. **å¤æ‚è¡¨è¾¾å¼**: åµŒå¥—è¡¨è¾¾å¼ä¸­çš„é—®é¢˜å¯èƒ½è¢«é—æ¼
2. **åŠ¨æ€å†…å­˜**: å¤æ‚çš„å†…å­˜ç®¡ç†åœºæ™¯å¯èƒ½è¢«é—æ¼
3. **å¤šçº¿ç¨‹**: å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„é—®é¢˜ä¸åœ¨æ£€æµ‹èŒƒå›´å†…

## ğŸ”„ æµ‹è¯•ç»´æŠ¤

### æ·»åŠ æ–°æµ‹è¯•ç”¨ä¾‹
1. åœ¨ç›¸åº”çš„æµ‹è¯•æ–‡ä»¶ä¸­æ·»åŠ æ–°åœºæ™¯
2. è¿è¡Œæµ‹è¯•éªŒè¯æ£€æµ‹ç»“æœ
3. æ›´æ–°æµ‹è¯•æ—¥å¿—
4. æäº¤å˜æ›´

### æ›´æ–°æµ‹è¯•æ ‡å‡†
1. åˆ†ææµ‹è¯•ç»“æœ
2. è¯†åˆ«è¯¯æŠ¥å’Œæ¼æŠ¥
3. è°ƒæ•´æ£€æµ‹ç®—æ³•
4. é‡æ–°è¿è¡Œæµ‹è¯•

## ğŸ“ æµ‹è¯•æœ€ä½³å®è·µ

### æµ‹è¯•ç”¨ä¾‹è®¾è®¡
- **è¦†ç›–æ€§**: ç¡®ä¿è¦†ç›–æ‰€æœ‰æ£€æµ‹åœºæ™¯
- **çœŸå®æ€§**: ä½¿ç”¨çœŸå®çš„Cä»£ç æ¨¡å¼
- **è¾¹ç•Œæ€§**: åŒ…å«è¾¹ç•Œå’Œå¼‚å¸¸æƒ…å†µ
- **å¯ç»´æŠ¤æ€§**: ä¿æŒæµ‹è¯•ç”¨ä¾‹çš„å¯è¯»æ€§

### æµ‹è¯•æ‰§è¡Œ
- **è‡ªåŠ¨åŒ–**: ä½¿ç”¨è„šæœ¬è‡ªåŠ¨è¿è¡Œæµ‹è¯•
- **å®šæœŸæ€§**: å®šæœŸæ‰§è¡Œæµ‹è¯•éªŒè¯åŠŸèƒ½
- **è®°å½•æ€§**: è¯¦ç»†è®°å½•æµ‹è¯•ç»“æœ
- **åˆ†ææ€§**: åˆ†ææµ‹è¯•ç»“æœå¹¶æ”¹è¿›

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ ¸å¿ƒä»£ç æ–‡æ¡£](../core/README.md)
- [æŠ€æœ¯æ–‡æ¡£](../docs/TECHNICAL_DOCUMENTATION.md)
- [å¿«é€Ÿå‚è€ƒ](../docs/QUICK_REFERENCE.md)
- [å®‰è£…æŒ‡å—](../docs/INSTALLATION_GUIDE.md)

## ğŸ“„ è®¸å¯è¯

æµ‹è¯•ç”¨ä¾‹éµå¾ªä¸é¡¹ç›®ç›¸åŒçš„ [MITè®¸å¯è¯](../LICENSE)ã€‚
